// jQuery 1.4.2 (already minified)
// Source: public/js/jquery-1.4.2.min.js
// Including the entire jQuery library here would make this file too large
// In a real implementation, we would use a build tool to concatenate the files

// Chat.js (minified)
$(document).ready(function(){loadMsg();hideLoading();$("form#chatform").submit(function(){$(".error").text("");$("input").removeClass("error-field");var message=$("#content").val().trim();var isValid=true;if(message===""){$("#content-error").text("Message is required");$("#content").addClass("error-field");isValid=false;}else if(message.length>500){$("#content-error").text("Message cannot exceed 500 characters");$("#content").addClass("error-field");isValid=false;}if(isValid){showLoading();$.post(CHAT_ROUTES.update,{message:message,action:"postmsg",[CSRF_TOKEN_NAME]:$('meta[name="csrf-token"]').attr('content')},function(response){hideLoading();if(response&&response.success===false){if(response.errors.message){$("#content-error").text(response.errors.message);$("#content").addClass("error-field");}}else{var escapedMessage=$('<div/>').text(message).html();$("#messagewindow").prepend("<b>"+CURRENT_USERNAME+"</b>: "+escapedMessage+"<br />");$("#content").val("");$("#content").focus();}}, "json").fail(function(){hideLoading();alert("An error occurred while sending your message. Please try again.");});}return false;});});function showLoading(){$("#contentLoading").show();$("#txt").hide();$("#author").hide();}function hideLoading(){$("#contentLoading").hide();$("#txt").show();$("#author").show();}function addMessages(xml){$(xml).find('message').each(function(){author=$(this).find("author").text();msg=$(this).find("text").text();var escapedAuthor=$('<div/>').text(author).html();var escapedMsg=$('<div/>').text(msg).html();$("#messagewindow").append("<b>"+escapedAuthor+"</b>: "+escapedMsg+"<br />");});}function loadMsg(){$.ajaxSetup({headers:{'X-CSRF-TOKEN':$('meta[name="csrf-token"]').attr('content')}});$.get(CHAT_ROUTES.backend,function(xml){$("#loading").remove();addMessages(xml);});}