// jQuery 1.4.2 (already minified)
// Source: public/js/jquery-1.4.2.min.js
// Including the entire jQuery library here would make this file too large
// In a real implementation, we would use a build tool to concatenate the files

// Chat-json.js (minified)
$(document).ready(function(){loadMsg();hideLoading();$("form#chatform").submit(function(){$(".error").text("");$("input").removeClass("error-field");var name=$("#name").val().trim();var message=$("#content").val().trim();var isValid=true;if(name===""){$("#name-error").text("Name is required");$("#name").addClass("error-field");isValid=false;}else if(name.length<2){$("#name-error").text("Name must be at least 2 characters long");$("#name").addClass("error-field");isValid=false;}else if(name.length>50){$("#name-error").text("Name cannot exceed 50 characters");$("#name").addClass("error-field");isValid=false;}else if(!/^[a-zA-Z0-9 ]+$/.test(name)){$("#name-error").text("Name can only contain alphanumeric characters and spaces");$("#name").addClass("error-field");isValid=false;}if(message===""){$("#content-error").text("Message is required");$("#content").addClass("error-field");isValid=false;}else if(message.length>500){$("#content-error").text("Message cannot exceed 500 characters");$("#content").addClass("error-field");isValid=false;}if(isValid){showLoading();$.post(CHAT_ROUTES.update,{message:message,name:name,action:"postmsg",[CSRF_TOKEN_NAME]:$('meta[name="csrf-token"]').attr('content')},function(response){hideLoading();if(response&&response.success===false){if(response.errors.name){$("#name-error").text(response.errors.name);$("#name").addClass("error-field");}if(response.errors.message){$("#content-error").text(response.errors.message);$("#content").addClass("error-field");}}else{var escapedName=$('<div/>').text(name).html();var escapedMessage=$('<div/>').text(message).html();$("#messagewindow").prepend("<b>"+escapedName+"</b>: "+escapedMessage+"<br />");$("#content").val("");$("#content").focus();}}, "json").fail(function(){hideLoading();alert("An error occurred while sending your message. Please try again.");});}return false;});});function showLoading(){$("#contentLoading").show();$("#txt").hide();$("#author").hide();}function hideLoading(){$("#contentLoading").hide();$("#txt").show();$("#author").show();}function addMessages(json){$.each(json,function(i,val){var escapedUser=$('<div/>').text(val.user).html();var escapedMsg=$('<div/>').text(val.msg).html();$("#messagewindow").append("<b>"+escapedUser+"</b>: "+escapedMsg+"<br />");});}function loadMsg(){$.ajaxSetup({headers:{'X-CSRF-TOKEN':$('meta[name="csrf-token"]').attr('content')}});$.getJSON(CHAT_ROUTES.jsonBackend,function(json){$("#loading").remove();addMessages(json);});}